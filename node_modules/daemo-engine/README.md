# Daemo Engine SDK for Node.js

[![npm version](https://badge.fury.io/js/daemo-engine.svg)](https://badge.fury.io/js/daemo-engine)

The official Daemo SDK for Node.js. Build powerful AI agents by connecting your existing TypeScript/JavaScript functions and services to the Daemo Engine.

## Features

- **Decorators-First Design**: Use simple decorators like `@DaemoFunction` and `@DaemoSchema` to expose your code to the AI.
- **Automatic Schema Generation**: Rich, detailed schemas are automatically generated from your DTO classes, giving the AI precise context.
- **Hosted Connection**: Easily connect your service to the Daemo Gateway for a fully managed experience.
- **Agent Client**: Query your agent, manage conversation threads, and stream responses directly from your application.
- **Strongly Typed**: Full TypeScript support for a great developer experience.

## Installation

```bash
npm install daemo-engine
```

## Quick Start

### 1. Enable Decorators in `tsconfig.json`

Your `tsconfig.json` must have these two compiler options enabled:

```json
{
  "compilerOptions": {
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true
  }
}
```

### 2. Define a Service with Daemo Functions

Create DTOs with `@DaemoSchema` and expose methods with `@DaemoFunction`.

```typescript
import { DaemoFunction, DaemoSchema } from "daemo-engine";
import "reflect-metadata"; // Must be imported once at the top level

@DaemoSchema({
  description: "Represents a user in the system.",
  properties: {
    id: { type: "string", description: "The user's unique ID." },
    name: { type: "string", description: "The user's full name." },
  },
})
class User {
  id: string = "";
  name: string = "";
}

class MyApiService {
  private users: User[] = [
    { id: "1", name: "Alice" },
    { id: "2", name: "Bob" },
  ];

  @DaemoFunction({
    description: "Gets a user by their unique ID.",
    returnType: User,
  })
  async getUserById(id: string): Promise<User | null> {
    return this.users.find((u) => u.id === id) || null;
  }
}
```

### 3. Build and Connect to Daemo

In your main application file (`app.ts` or `index.ts`):

```typescript
import { DaemoBuilder, DaemoHostedConnection } from "daemo-engine";
import { MyApiService } from "./myApiService";

async function main() {
  const myApiService = new MyApiService();

  // Build the session data
  const sessionData = new DaemoBuilder()
    .withServiceName("api_service")
    .registerService(myApiService)
    .build();

  // Connect to the Daemo Gateway
  const connection = new DaemoHostedConnection(
    {
      daemoGatewayUrl: process.env.DAEMO_GATEWAY_URL, // e.g., "http://localhost:50052"
      agentApiKey: process.env.DAEMO_AGENT_API_KEY,
    },
    sessionData,
  );

  await connection.start();
  console.log("Daemo service connected!");
}

main();
```

## Documentation

For more detailed documentation, API reference, and examples, please visit our [docs](docs.daemo.ai). <!-- Link to your docs -->

## License

This project is licensed under the [ICS License](LICENSE).
